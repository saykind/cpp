<!DOCTYPE html>
<!-- saved from url=(0046)http://www.cplusplus.com/forum/beginner/15396/ -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Making my own String class: - C++ Forum</title>
<link rel="shortcut icon" type="image/x-icon" href="http://www.cplusplus.com/favicon.ico">
<link rel="stylesheet" type="text/css" href="./Making my own String class  - C++ Forum_files/main.css">
<script type="text/javascript" async="" src="./Making my own String class  - C++ Forum_files/ga.js"></script><script src="./Making my own String class  - C++ Forum_files/main.js" type="text/javascript"></script><style type="text/css"></style>
</head>
<body>
<div id="I_top">
<div id="I_header">
<div id="I_logo"><a href="http://www.cplusplus.com/" title="cplusplus.com"><div></div></a></div>
<div id="I_search">
<form id="search" action="http://www.cplusplus.com/search.do" method="get">
Search: <input name="q" size="20" class="txt"> <input type="submit" value="Go" class="btn">
</form>
</div>
<div id="I_bar">
<ul>
<li><a href="http://www.cplusplus.com/forum/">Forum</a></li>
<li><a href="http://www.cplusplus.com/forum/beginner/">Beginners</a></li>
<li class="here">Making my own String class:</li>
</ul>
</div>
<div id="I_user" class="C_LoginBox"><span title="ajax"></span><div id="I_corner" style="display: block;"><div id="I_cornerinner"><div id="I_userid">Not logged in</div></div></div><div id="I_userbuttons"><a href="http://www.cplusplus.com/user/access.cgi?w=signup">register</a><a id="I_btnlogin" href="javascript:LBI_user.modal(1)">log in</a></div><div id="I_fold" style="display: none;"><div class="deco"></div><form name="I_loginform" id="I_loginform" action="http://www.cplusplus.com/user/access.cgi" onsubmit="LBI_user.login(); return false;" method="post" style="display: none;"><div class="fields"><input type="hidden" name="w" value="login"><input type="hidden" name="y" value="1"><input type="hidden" name="to" value="http://www.cplusplus.com/forum/beginner/15396/">user name: <input class="txt" name="l" size="8" type="text" title="Type user name"><br>password: <input class="txt" name="p" size="8" type="password" title="Type password"><br><input class="chk" name="rememberme" id="rememberme" value="1" type="checkbox"><label for="rememberme">remember me</label>&nbsp;<input class="btn" value="sign in" type="submit"><br><div class="forgot"><a href="http://www.cplusplus.com/user/access.cgi?w=lostpass">forgot your password?</a></div></div><div class="openid">or sign in using:<br><a class="google" href="http://www.cplusplus.com/user/access.cgi?w=login&y=1&pr=google&to=%2Fforum%2Fbeginner%2F15396%2F" title="Sign in using your google account"><span></span></a><a class="yahoo" href="http://www.cplusplus.com/user/access.cgi?w=login&y=1&pr=yahoo&to=%2Fforum%2Fbeginner%2F15396%2F" title="Sign in using your Yahoo! account"><span></span></a> </div></form><div id="I_loginwait" style="display: none;"></div><div id="I_loginfail" style="display: none;"><div id="I_loginfailtext"></div><a class="C_bRepeat" href="javascript:LBI_user.modal(1)">try again</a><a class="C_bCancel" href="javascript:LBI_user.modal(0)">cancel</a><div class="forgot"><a href="http://www.cplusplus.com/user/access.cgi?w=lostpass">forgot your password?</a></div></div><div class="close"><a href="javascript:LBI_user.modal(0)" title="cancel log in"><span></span></a></div></div></div>
</div>
</div>
<div id="I_mid">
<div id="I_wrap">
<div id="I_minheight" style="height: 495px;"></div>
<div id="I_main">
<div class="C_support"><script type="text/javascript"><!--
if (!cookieGet("hspt31")) {
  document.write('<div class="C_DonateBox"></div>');
}
//-->
</script><div class="C_DonateBox"><div style="width:726px; height:88px; border:1px solid #E0E0E0; display:table-cell; vertical-align:middle; text-align:center;">You are using a version without Ads of this website. <i>Please, consider donating:</i><br><form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" id="donateform" onsubmit="return donate.check()" style="margin:5px;"><input type="hidden" name="cmd" value="_s-xclick"><input type="hidden" name="hosted_button_id" value="RRZMVWTTSKA8L"><input type="image" src="./Making my own String class  - C++ Forum_files/donate.gif" border="0" name="submit" alt="Donate with PayPal"><input type="hidden" name="custom" value=""><input type="hidden" name="item_name" value="Support cplusplus.com"><input type="hidden" name="return" value="http://www.cplusplus.com/user/payments.cgi?w=donated&amp;re=http%3A%2F%2Fwww.cplusplus.com%2Fforum%2Fbeginner%2F15396%2F"><input type="hidden" name="cancel_return" value="http://www.cplusplus.com/forum/beginner/15396/"><input type="hidden" name="notify_url" value="http://www.cplusplus.com/user/payments.cgi?w=paypal"><input type="hidden" name="rm" value="2"><input type="hidden" name="lc" value="US"><input type="hidden" name="no_shipping" value="1"></form></div><div style="position:relative; top:-20px; width:726; height:20px; padding-right:5px; text-align:right; "><span style="font-size:9px">[<a href="javascript:donate.hide()" title="Click to hide this message">hide</a>]</span></div></div><div class="C_ad728"><script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div><div class="C_supportbottom"></div></div><div id="I_content">
<h3><div class="C_ico question" title="question">&nbsp;</div><div class="C_ico solved" title="solved">&nbsp;</div> Making my own String class:</h3><span id="CH_edttl"></span><span class="rootdatPost" title="15396,root,0,-1,7,0"></span><div id="CH_PostList"><div class="C_forPost" id="msg75769"><span title="75769,20705,1023,9,1"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg75769" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTme1b0f085df" title="Fri, 16 Oct 2009 08:00:32 +0000">Oct 16, 2009 at 12:00pm</span><script type="text/javascript">WhenId('CH_zTme1b0f085df');</script><noscript>Oct 16, 2009 at 8:00am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/xxhashxx/"><b>xxhashxx</b> (9)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i75769">
I am writing my own string class library, that contains basic functions of the string class, along with overloading the +,==,&gt;,&lt;,&lt;&lt; and &gt;&gt; operators. I have defined the "MyString" class header file as follows.<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br></code></pre></td>
<td class="source"><pre><code><dfn># include &lt;iostream&gt;</dfn>
<var>using</var> <var>namespace</var> std;
<var>class</var> MyString
{
<var>friend</var> <var>bool</var> <var>operator</var> == (<var>const</var> MyString &amp; S1, <var>const</var> MyString &amp; S2);
<var>friend</var> <var>bool</var> <var>operator</var> &lt; (<var>const</var> MyString &amp; S1, <var>const</var> MyString &amp; S2);
<var>friend</var> <var>bool</var> <var>operator</var> &gt; (<var>const</var> MyString &amp; S1, <var>const</var> MyString &amp; S2);
<var>friend</var> MyString <var>operator</var> +(MyString &amp;S1 , MyString &amp; S2);
	
	
<var>public</var>:
	MyString();<cite>//</cite>
	MyString(<var>char</var> *STR);<cite>//</cite>
	MyString(MyString &amp; STR);<cite>//</cite>
	<var>virtual</var> ~MyString();
    
   	MyString substr(<var>int</var> index,<var>int</var> length);
	<var>int</var> find(<var>const</var> MyString&amp; str, <var>int</var> index = 0);
	<var>char</var>&amp; at(<var>int</var> loc);
	<var>void</var> swap(MyString&amp; from);
	
	<var>int</var> length();<cite>//</cite>
	<var>bool</var> empty();<cite>// check for empty string</cite>
		
	<var>char</var>* get_string(){<var>return</var> DATA;}
	<var>int</var> get_length(){<var>return</var> str_length;}
	<var>void</var> set_data(<var>char</var> * input, MyString &amp;S);
<var>private</var>:
	<var>int</var> str_length;
	<var>char</var> *DATA;
};
ostream&amp; <var>operator</var> &lt;&lt;(ostream&amp; OS, MyString &amp;S);
istream&amp; <var>operator</var> &gt;&gt;(istream&amp; IS, MyString &amp;S);</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
My constructors work, and i can create a default object and cin the the string into the object and later cout the string.<br>
<br>
my problem arises when i am overloading the + operator.<br>
<br>
the definition for the + operator:<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br></code></pre></td>
<td class="source"><pre><code>MyString <var>operator</var> +(MyString&amp; S1, MyString &amp;S2)
{
<var>int</var> size = S1.str_length + S2.str_length + 1;
<var>char</var>* temp = <var>new</var> <var>char</var>[size];

memcpy(temp,S1.DATA,S1.str_length);

strcat(temp,S2.DATA);
cout &lt;&lt; temp &lt;&lt; <kbd>" "</kbd> &lt;&lt; strlen(temp)&lt;&lt; endl;

MyString K;
K.set_data(temp,K);
<var>delete</var>[]temp;
<var>return</var> K;
}

<var>void</var> MyString::set_data(<var>char</var> *input, MyString &amp;S)
{
str_length = strlen(input)+1;
DATA = <var>new</var> <var>char</var>[str_length];
memcpy(DATA,input,str_length);
}

</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
<br>
<br>
When i say S1("sam") and S2("jhon"), and later on in the code i say S1 + S2, i expect an output of "samjhon",of size 7 excluding the "\0", but i get a string of size 37 outputting a string of gibberish.In the function i place a cout statement for the temp variable, and it contains the right string of the right size. So how is the temp not getting copied over to the obj k.<br>
<br>
the following is default consrutor and the &lt;&lt;,&gt;&gt; operators:<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br></code></pre></td>
<td class="source"><pre><code>MyString::MyString()
{
str_length = 1;
DATA = <var>new</var> <var>char</var>[str_length];
memcpy(DATA,<kbd>""</kbd>,str_length);
}


ostream&amp; <var>operator</var> &lt;&lt; (ostream&amp; OS, MyString &amp; S)
{
OS &lt;&lt; S.get_string();
<var>return</var> OS;
}

istream&amp; <var>operator</var> &gt;&gt; (istream&amp; IS, MyString &amp; S)
{
<var>char</var>* input = <var>new</var> <var>char</var>[100];
IS.getline(input,100);
S.set_data(input,S);
<var>delete</var>[] input;
<var>return</var> IS;
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
Please suggest any ideas, to rectify this.<br>
thanks 
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn75769"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg75779"><span title="75779,17129,1023,7225,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg75779" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTmf3796cd8ee" title="Fri, 16 Oct 2009 09:17:40 +0000">Oct 16, 2009 at 1:17pm</span><script type="text/javascript">WhenId('CH_zTmf3796cd8ee');</script><noscript>Oct 16, 2009 at 9:17am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/kbw/"><b>kbw</b> (7225)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i75779">
First a few questions.<br>
<br>
1. Have you considered the use of const?<br>
        <span class="auto"><code class="source">MyString(MyString &amp; STR);</code></span> is very different from<br>
        <span class="auto"><code class="source">MyString(<var>const</var> <var>const</var> MyString &amp; STR);</code></span><br>
    The compiler will generate the second if it's not found, and in your case, it's the wrong thing.<br>
<br>
    <span class="auto"><code class="source">stream&amp; <var>operator</var> &lt;&lt; (ostream&amp; OS, MyString &amp; S)</code></span> should be<br>
    <span class="auto"><code class="source">stream&amp; <var>operator</var> &lt;&lt; (ostream&amp; OS, MyString &amp; S)</code></span> *EDIT*<br>
<br>
2. Why are you using <span class="auto"><code class="source">memcpy</code></span> when working with strings?  You need to be consistent.<br>
<br>
3. Memory sizes are of type size_t, not specifically int.  You ought to be warned by your compiler about this.<br>
<br>
4. Why is your destructor virtual?<br>
<br>
5. Why is <span class="auto"><code class="source">set_data</code></span> not private?  Plus you allocate memory, pass it in to <span class="auto"><code class="source">set_data</code></span>, which copies the block and then it's deleted by the caller.  Why doesn't it just take ownership of the block and use it?  And why does it take a string as a parameter?<br>
<br>
<br>
You haven't posted the code for your destructor, I take it it deletes <span class="auto"><code class="source">DATA</code></span>.<br>
<br>
The problem you've reported is caused by point 1.  The compiler call its copy constructor (not yours) and so the memory its using is deleted during the copy.<br>

</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm402768747f" title="Mon, 19 Oct 2009 08:52:03 +0000">Oct 19, 2009 at 12:52pm</span><script type="text/javascript">WhenId('CH_zTm402768747f');</script><noscript>Oct 19, 2009 at 8:52am UTC</noscript></span>
<span class="dbtn" id="CH_btn75779"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg76030"><span title="76030,20705,1023,9,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg76030" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTm22bef4fef4" title="Sat, 17 Oct 2009 23:23:05 +0000">Oct 18, 2009 at 3:23am</span><script type="text/javascript">WhenId('CH_zTm22bef4fef4');</script><noscript>Oct 17, 2009 at 11:23pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/xxhashxx/"><b>xxhashxx</b> (9)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i76030">
thanks kbw for your reply, following your suggestions, i rewrote the program from scratch and got better results:<br>
<br>
class:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br></code></pre></td>
<td class="source"><pre><code>
<var>class</var> MyString
{

<var>public</var>:
	MyString(<var>void</var>);<cite>//default sets string to NULL</cite>
	MyString(<var>const</var> <var>char</var>* input);<cite>//Takes in a string and creates an object</cite>
	MyString(<var>const</var> MyString &amp; S);<cite>//Copy constructor</cite>
	~MyString(<var>void</var>);<cite>//Destructor deletes the nstring at the end</cite>
    
    
	<var>int</var> length();<cite>//displays length of string excluding null</cite>
	<var>char</var>&amp; at(<var>int</var> loc);<cite>// returns a chracter at specified loc-1</cite>
	<var>bool</var> empty();<cite>// if string is empty returns true else it returns false</cite>
    <var>void</var> swap(MyString&amp; from);<cite>// swaps the contents of two strings</cite>
	<var>int</var> find (<var>const</var> MyString&amp; S, <var>int</var> index =0);
	MyString substr(<var>int</var> index, <var>int</var> length);<cite>// returns an object which is the substring of the object that calls it</cite>


<var>friend</var> ostream&amp; <var>operator</var> &lt;&lt; (ostream &amp; OS,<var>const</var> MyString &amp;S);<cite>// out stream displays the string</cite>
<var>friend</var> istream&amp; <var>operator</var> &gt;&gt; (istream &amp; IS,MyString &amp;S);<cite>//instream takes in a string and creates and object</cite>
MyString&amp; <var>operator</var> = (<var>const</var> MyString&amp; S);<cite>//if A and B are object B is "neil", the A =B therefore A is "neil"</cite>
<var>friend</var>  <var>bool</var> <var>operator</var> ==(<var>const</var> MyString&amp; S1, <var>const</var> MyString &amp; S2);<cite>// checks if both strings are equal</cite>
<var>friend</var> MyString <var>operator</var> + (<var>const</var> MyString&amp; S1, <var>const</var> MyString &amp; S2);<cite>//still buggy</cite>

<var>private</var>:
	<var>char</var>* nstring;
	<var>short</var> nlength;
};</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
<br>
I made changes to my class.<br>
<br>
The following is the implementation of  the functions and constructors:<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br>21<br>22<br>23<br>24<br>25<br>26<br>27<br>28<br>29<br>30<br>31<br>32<br>33<br>34<br>35<br>36<br>37<br>38<br>39<br>40<br>41<br>42<br>43<br>44<br>45<br>46<br>47<br>48<br>49<br>50<br>51<br>52<br>53<br>54<br>55<br>56<br>57<br>58<br>59<br>60<br>61<br>62<br>63<br>64<br>65<br>66<br>67<br>68<br>69<br>70<br>71<br>72<br>73<br>74<br>75<br>76<br>77<br>78<br>79<br>80<br>81<br>82<br>83<br>84<br>85<br>86<br>87<br>88<br>89<br>90<br>91<br>92<br>93<br>94<br>95<br>96<br>97<br>98<br>99<br>100<br>101<br>102<br>103<br>104<br>105<br>106<br>107<br>108<br>109<br>110<br>111<br>112<br>113<br>114<br>115<br>116<br>117<br>118<br>119<br>120<br>121<br>122<br>123<br>124<br>125<br>126<br>127<br>128<br>129<br>130<br>131<br>132<br>133<br>134<br>135<br>136<br>137<br>138<br>139<br>140<br>141<br>142<br>143<br>144<br>145<br>146<br>147<br>148<br>149<br>150<br>151<br>152<br>153<br>154<br>155<br>156<br>157<br>158<br>159<br>160<br>161<br>162<br>163<br>164<br>165<br>166<br>167<br>168<br>169<br>170<br>171<br>172<br>173<br>174<br>175<br>176<br>177<br>178<br>179<br>180<br>181<br>182<br>183<br>184<br>185<br>186<br>187<br>188<br>189<br>190<br>191<br>192<br>193<br>194<br>195<br>196<br>197<br>198<br>199<br>200<br>201<br>202<br>203<br>204<br>205<br>206<br>207<br>208<br>209<br>210<br>211<br>212<br>213<br>214<br>215<br>216<br>217<br>218<br>219<br>220<br></code></pre></td>
<td class="source"><pre><code><dfn># include "MyString.h"</dfn>
<dfn># include &lt;iostream&gt;</dfn>
<dfn># include &lt;cstring&gt;</dfn>

<var>using</var> <var>namespace</var> std;

<cite>/*temp = is a temporary variable*/</cite>

MyString::MyString()
{
nlength = 1;
nstring = <var>new</var> <var>char</var>[nlength];
nstring[nlength-1] = <kbd>'\0'</kbd>;
}

MyString::MyString(<var>const</var> <var>char</var> *input)
{
nlength = strlen(input)+1 ;
nstring = <var>new</var> <var>char</var>[nlength];
<var>for</var>(<var>int</var> i = 0; i &lt; (nlength - 1); i++)
{
nstring[i] = input[i];
}
nstring[(nlength-1)] = NULL;
}

MyString::MyString(<var>const</var> MyString&amp; S)
{
nlength = S.nlength;
nstring = <var>new</var> <var>char</var>[nlength];
<var>for</var>(<var>int</var> i = 0; i &lt; (nlength - 1); i++)
{
	nstring[i] = S.nstring[i];
}

<var>if</var>(nstring[nlength - 1] != <kbd>'\0'</kbd>){nstring[nlength -1] = <kbd>'\0'</kbd>;}
}

MyString::~MyString()
{
<var>delete</var>[] nstring;
}


<var>int</var> MyString::length()
{
<var>int</var> i = 0;
<var>while</var>(nstring[i] != <kbd>'\0'</kbd>)
{i++;}
<var>return</var> i;
}

<var>char</var>&amp; MyString::at(<var>int</var> loc)
{
<var>return</var> nstring[loc - 1];
}

<var>bool</var> MyString::empty()
{
	<var>if</var>(nstring[0] == NULL &amp;&amp; nlength == 1){<var>return</var> <var>true</var>;}
	<var>else</var> {<var>return</var> <var>false</var>;}
}

<var>void</var> MyString::swap(MyString &amp;from)
{
<var>short</var> lena = nlength;<var>short</var> lenb = from.nlength;
<var>char</var> *temp1 = <var>new</var> <var>char</var>[lena];
<var>char</var> *temp2 = <var>new</var> <var>char</var>[lenb];

<var>for</var>(<var>int</var> i = 0; i &lt; (lena- 1); i++)
{
	temp1[i] = nstring[i];
}
<var>if</var>(temp1[lena - 1] != <kbd>'\0'</kbd>){temp1[lena -1] = <kbd>'\0'</kbd>;}

<var>for</var>(<var>int</var> j = 0; j &lt; (lenb- 1); j++)
{
	temp2[j] = from.nstring[j];
}
<var>if</var>(temp2[lenb - 1] != <kbd>'\0'</kbd>){temp2[lenb -1] = <kbd>'\0'</kbd>;}

<var>delete</var>[] nstring;<var>delete</var>[]from.nstring;

nstring = <var>new</var> <var>char</var>[lenb];
nlength = lenb;
from.nstring = <var>new</var> <var>char</var>[lena];
from.nlength = lena;

<var>for</var>(<var>int</var> k = 0; k &lt; (lenb - 1); k++)
{
nstring[k] = temp2[k];
}
<var>if</var>(nstring[lenb -1] != <kbd>'\0'</kbd>){nstring[lenb - 1] = <kbd>'\0'</kbd>;}

<var>for</var>(<var>int</var> l = 0; l &lt; (lena - 1); l++)
{
from.nstring[l] = temp1[l];
}
<var>if</var>(from.nstring[lena -1] != <kbd>'\0'</kbd>){from.nstring[lena-1] = <kbd>'\0'</kbd>;}

<var>delete</var>[]temp1; <var>delete</var>[]temp2;
}


MyString MyString::substr(<var>int</var> index, <var>int</var> length)
{
<var>short</var> size = length+1;
<var>char</var>* temp = <var>new</var> <var>char</var>[size];
<var>int</var> j = 0;
<var>for</var>(<var>int</var> i = index, j = 0; i &lt; length; i++, j++)
{
temp[j] = nstring[i];
}
<var>if</var>(temp[size -1 ] != <kbd>'\0'</kbd>){temp[size -1] = <kbd>'\0'</kbd>;}


MyString RET;
RET.nlength = size;
<var>delete</var>[]RET.nstring;
RET.nstring = <var>new</var> <var>char</var>[size];
<var>for</var>(<var>short</var> m = 0; m &lt; (size - 1);m++)
{
	RET.nstring[m] = temp[m];
}

<var>if</var>(RET.nstring[size-1] != <kbd>'\0'</kbd>){RET.nstring[size-1] = <kbd>'\0'</kbd>;}
<var>return</var> RET; 
<var>delete</var>[]temp;
}



<var>bool</var> <var>operator</var> == (<var>const</var> MyString &amp; S1, <var>const</var> MyString &amp; S2)
{
	<var>if</var>(S1.nlength == S2.nlength)
	{
		<var>short</var> counter1 = S1.nlength;
		<var>int</var> counter2 = 0;
		<var>int</var> i = 0;
		<var>while</var>(i != counter1)
		{
			<var>if</var>(S1.nstring[i] != S2.nstring[i]){counter2++;}
			i++;
		}
		cout &lt;&lt; i &lt;&lt; <kbd>" "</kbd> &lt;&lt; counter2 &lt;&lt; endl;
		<var>if</var>(counter2 != 0) {<var>return</var> <var>false</var>;}
		<var>else</var>{<var>return</var> <var>true</var>;}		
	}
	<var>else</var> {<var>return</var> <var>false</var>;}

}

ostream&amp; <var>operator</var> &lt;&lt;(ostream &amp; OS, <var>const</var> MyString&amp; S)
{
OS &lt;&lt; S.nstring;
<var>return</var> OS;
}

istream&amp; <var>operator</var> &gt;&gt;(istream &amp; IS,MyString&amp; S)
{
<var>char</var>* input = <var>new</var> <var>char</var>[100];
IS.getline(input,100);

<var>int</var> i = 0;
<var>while</var>(input[i] != <kbd>'\0'</kbd>)
{i++;}
S.nlength = i+1;
<var>delete</var>[]S.nstring;
S.nstring = <var>new</var> <var>char</var>[(i+1)];
<var>for</var>(<var>int</var> j = 0; j &lt; (i) ; j++)
{
	S.nstring[j] = input[j];
}
S.nstring[i] = <kbd>'\0'</kbd>;
<var>delete</var>[]input;
<var>return</var> IS;
}

MyString&amp; MyString::<var>operator</var> =(<var>const</var> MyString &amp;S)
{
nlength = S.nlength;
<var>delete</var>[] nstring;
nstring = <var>new</var> <var>char</var>[nlength];
<var>for</var>(<var>int</var> i = 0 ; i &lt; (nlength -1);i++)
{
nstring[i] = S.nstring[i];
}
nstring[(nlength -1)] = <kbd>'\0'</kbd>;
<var>return</var> *<var>this</var>;
}

MyString <var>operator</var> + (<var>const</var> MyString&amp; S1, <var>const</var> MyString &amp; S2)
{
<var>int</var> size = S1.nlength + S2.nlength +1;
<var>char</var> * temp = <var>new</var> <var>char</var>[size];
<var>for</var>(<var>int</var> i = 0; i &lt; (S1.nlength -1);i++)
{
temp[i] = S1.nstring[i];
}

<var>int</var> j = 0;
<var>for</var>(<var>short</var> k = S1.nlength , j=0; k &lt; (size-1) ; k++, j++)
{
temp[k] = S2.nstring[j];
}
<var>if</var>(temp[size -1 ] != <kbd>'\0'</kbd>){temp[size -1] = <kbd>'\0'</kbd>;}

MyString S3;
S3.nlength = size;
<var>delete</var>[] S3.nstring;
S3.nstring = <var>new</var> <var>char</var> [size];
<var>for</var>(<var>int</var> z = 0; z &lt; (size -1); z++)
{
S3.nstring[z] = temp[z];
}
<var>if</var>(S3.nstring[size-1] != <kbd>'\0'</kbd>){S3.nstring = <kbd>'\0'</kbd>;}
<var>return</var> S3;
<var>delete</var>[] temp;
}
</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
<br>
everything works well for example:<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br></code></pre></td>
<td class="source"><pre><code>MyString A(<kbd>"max"</kbd>),B,C;
cin &gt;&gt; B;<cite>//cin" jhon"</cite>
A.swap(B);
C = A.substr(0,3);
cout &lt;&lt; C;</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="output"><pre><samp>
C = "jho"
</samp></pre></td></tr></tbody></table></div><br>
<br>
The problem arises with the overloaded "+" operator, any time i say A+B etc,<br>
i get a "Unhandled Exception error, Access Violation reading loaction". It then show me that some thing went wrong when values passed my copy constructor.<br>
<br>
Does any one have any idea, whats happening?<br>
Thanks in advance.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn76030"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg76046"><span title="76046,9110,5119,8799,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg76046" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTm2f03765e78" title="Sun, 18 Oct 2009 02:36:34 +0000">Oct 18, 2009 at 6:36am</span><script type="text/javascript">WhenId('CH_zTm2f03765e78');</script><noscript>Oct 18, 2009 at 2:36am UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Duoas/"><b>Duoas</b> (8799)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i76046">
@<b>kbw</b><br>
point 1: I think you meant to write:<br>
<span class="auto"><code class="source">stream&amp; <var>operator</var> &lt;&lt; (ostream&amp; OS, MyString &amp; S)</code></span> should be<br>
<span class="auto"><code class="source">stream&amp; <var>operator</var> &lt;&lt; (ostream&amp; OS, <b><var>const</var></b> MyString &amp; S)</code></span><br>
<br>
@<b>xxhashxx</b><br>
You need to use a better coding style and pay close attention to what you are doing. It is tripping you up to be so tricky.<br>
<br>
For example, it is an INVARIANT that your string's 'nlength' member is exactly (the number of characters in the string plus one), and your 'nstring' member contains exactly 'nlength' characters, and the very last character must be <span class="auto"><code class="source"><kbd>'\0'</kbd></code></span> (<i>not</i> <tt>NULL</tt>, by the way, which is something different).<br>
<br>
Hence, your constructors could be written much more succinctly:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br></code></pre></td>
<td class="source"><pre><code>MyString::MyString()
{
  <cite>// A new, empty string contains zero characters plus a terminating zero.</cite>
  nlength = 1;
  nstring = <var>new</var> <var>char</var>[1];
  nstring[0] = <kbd>'\0'</kbd>;
}

MyString::MyString(<var>const</var> <var>char</var> *input)
{
  <cite>// A new, copy of a C-string contains exactly the same number of characters in</cite>
  <cite>// the C-string plus a terminating zero.</cite>
  nlength = strlen( input ) + 1;
  nstring = <var>new</var> <var>char</var>[ nlength ];
  <var>for</var> (<var>int</var> i = 0; i &lt; nlength; i++)
    nstring[ i ] = input[ i ];
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
For good measure, that second one could have been written as:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br></code></pre></td>
<td class="source"><pre><code>MyString::MyString(<var>const</var> <var>char</var> *input)
{
  <cite>// A new, copy of a C-string contains exactly the same number of characters in</cite>
  <cite>// the C-string plus a terminating zero.</cite>
  nlength = strlen( input ) + 1;
  nstring = <var>new</var> <var>char</var>[ nlength ];
  strcpy( nstring, input );
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
The copy constructor should be just as plain:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br></code></pre></td>
<td class="source"><pre><code>MyString::MyString(<var>const</var> MyString&amp; S)
{
  nlength = S.nlength;  <cite>// we know this is correct!</cite>
  nstring = <var>new</var> <var>char</var>[ nlength ];
  strcpy( nstring, S.nstring );
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
Now consider your [edit] <del>destructor</del> length function [/edit], which does essentially what <b>strlen</b>() does -- but in any case you don't need either a loop or <b>strlen</b>(), because you know that <b>nlength</b> is (the number of characters in the plus one)! You try:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code><var>int</var> MyString::length()
{
  <var>return</var> <cite>/* return something simple: <u>no</u> loops and <u>no</u> strlen() allowed here! */</cite>
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
Your <b>operator+</b>() function is doing the same kind of thing. You've got so many things happening in there you are getting lost. Hint: use <b>strcpy</b>() and <b>strcat</b>(). No loops necessary. It will take you all of seven lines of code:<br>
1 create your result string (which you named "S3")<br>
2 <b>delete</b>[] the old 'nstring'<br>
3 calculate result string's new length<br>
4 allocate the new nstring with <b>new</b><br>
5 copy S1's data to the new nstring<br>
6 concatenate S2's data to the new nstring<br>
7 return the new string<br>
<br>
Also watch out for the order in which things happen. Notice how line 217 <b>return</b>s <b>S3</b>, but line 218 <b>delete</b>[]s the temporary data. Of course, line 218 can never happen, because you <b>return</b>ed before that.<br>
<br>
I'm running out of pep, but it would be a really good idea to fix your <b>operator==</b>() also.<br>
<br>
Hope this helps.
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTm83fb6c4db9" title="Mon, 19 Oct 2009 16:03:49 +0000">Oct 19, 2009 at 8:03pm</span><script type="text/javascript">WhenId('CH_zTm83fb6c4db9');</script><noscript>Oct 19, 2009 at 4:03pm UTC</noscript></span>
<span class="dbtn" id="CH_btn76046"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg76251"><span title="76251,20705,1023,9,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg76251" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTmf3ca57f57c" title="Mon, 19 Oct 2009 15:28:11 +0000">Oct 19, 2009 at 7:28pm</span><script type="text/javascript">WhenId('CH_zTmf3ca57f57c');</script><noscript>Oct 19, 2009 at 3:28pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/xxhashxx/"><b>xxhashxx</b> (9)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i76251">
@ duoas<br>
<br>
i was going to use the cstring library functions i.e. strcpy() strcmp(), to define my member functions. But my professor asked us to make our own functions and limit our use of the cstring functions. Hence why i ended up using som many loops.<br>
<br>
i have some questions:<br>
<table class="quote"><tbody><tr><td class="qd">Now consider your destructor, which does essentially what strlen() does </td></tr></tbody></table> what exacty do you mean here?<br>
 And should i make my destructor virtual since i am using dynamic memory and pointers.<br>
<br>
<table class="quote"><tbody><tr><td class="qd">but in any case you don't need either a loop or strlen(), because you know that nlength is (the number of characters in the plus one)! You try:<br>
</td></tr></tbody></table><br>
<br>
yeah i realised that i should just :<br>
<span class="auto"><code class="source"><var>return</var> nlength-1;</code></span><br>
instead of getting into loops.<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br></code></pre></td>
<td class="source"><pre><code><var>for</var>(<var>int</var> z = 0; z &lt; (size -1); z++)
{
S3.nstring[z] = temp[z];
}
<var>if</var>(S3.nstring[size-1] != <kbd>'\0'</kbd>){S3.nstring = <kbd>'\0'</kbd>;}
<var>return</var> S3;
<var>delete</var>[] temp;</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
yeah that wrong also, thanks for pointing that out , so i should delete[] temp before return S3.<br>
<br>
i know that "\0" refers to an empty string, and '\0' refers the termination point of a string , so what is NULL exactly?<br>
<br>
Just wanted to clarify , if i input a name as so<br>
MyString A("bob"), am i passing "bob" to the function or "bob\0" , <br>
<br>
if it is the first case then nlength will equal to 3+1 = 4<br>
so if i am going to enter values into the array , i will start at index 0.<br>
<br>
0 = b<br>
1 = o<br>
2 = b<br>
3 = \0<br>
<br>
which is why i made it nlength-1.<br>
<br>
my ==() seems to be okay for the following:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br></code></pre></td>
<td class="source"><pre><code>MyString A(<kbd>"seal"</kbd>),B(<kbd>"seal"</kbd>),C(<kbd>"bob"</kbd>),D(<kbd>"bobe"</kbd>);
<var>bool</var> case1 = (A == B);
<var>bool</var> case2 = (A == C);
<var>bool</var> case3 = (A == D);
cout &lt;&lt; case1 &lt;&lt; endl;
cout &lt;&lt; case2 &lt;&lt; endl;
cout &lt;&lt; case3 &lt;&lt; endl;</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="output"><pre><samp>
1
0
0</samp></pre></td></tr></tbody></table></div><br>
<br>
i also want to know<br>
<br>
if i say this:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br></code></pre></td>
<td class="source"><pre><code>
MyString A,B,C;
cin &gt;&gt; A;
cin &gt;&gt; B;
C=A+B;<cite>// what exactly happens here? </cite></code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
when i say this A+B, the +() is caled and computes the temp value and passes it to an object and returns it, i defined a =() in my code and tested it also and that works.<br>
<br>
C = (A+B) when the value is returned does the compiler call the copy constructor, since the debugger always points there, or does it invoke the =()<br>
<br>
again thanks for you help
</div>
<div class="dhow">
<span class="sedited">Last edited on <span id="CH_zTmbe742a53a9" title="Mon, 19 Oct 2009 15:29:01 +0000">Oct 19, 2009 at 7:29pm</span><script type="text/javascript">WhenId('CH_zTmbe742a53a9');</script><noscript>Oct 19, 2009 at 3:29pm UTC</noscript></span>
<span class="dbtn" id="CH_btn76251"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg76261"><span title="76261,9110,5119,8799,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg76261" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTm7bb3a3a179" title="Mon, 19 Oct 2009 16:38:53 +0000">Oct 19, 2009 at 8:38pm</span><script type="text/javascript">WhenId('CH_zTm7bb3a3a179');</script><noscript>Oct 19, 2009 at 4:38pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/Duoas/"><b>Duoas</b> (8799)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i76261">
Oops... didn't mean to write "destructor". I fixed my post above.<br>
<br>
A "string" is just an array of <b>char</b> stored somewhere in memory, where the last character is the "nul" character.<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br></code></pre></td>
<td class="source"><pre><code>Name          Type      Value     Meaning
NULL          pointer   0         An invalid pointer value -- it cannot be dereferenced.
nul           <var>char</var>      <kbd>'\0'</kbd>      The ASCII NUL character
empty string  <var>char</var>[]    <kbd>""</kbd>        A string containing no characters other than the terminating nul.</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
In C and C++, all arrays are handled via <i>pointers</i>. First, you must know something about memory spaces. What follows is simplified tremendously.<br>
<br>
Memory is nothing but a numbered array of cells. The operating system controls which of those cells your program uses. Within your program, there are cells that store the machine code that tells the computer what to do. This is traditionally called the "text" segment. There are also cells that store data literals that you write into your program -- like <span class="auto"><code class="source"><kbd>"Hello world!"</kbd></code></span>. This is traditionally called the "data" segment. There are cells that are used to store temporary data -- variables you create inside functions and the like. This is called the "stack". And finally, there are cells that you access with <b>new</b> and <b>delete</b>. This is called the "heap".<br>
<br>
In both the following cases, the double-quoted stuff on the right is an array of <b>char</b> stored somewhere in your program's data segment. The first example assigns the address of the very first character in the array to the pointer variable <b>greeting</b>. The second example makes a copy of the string "May the road rise to meet you!" (which is in the data segment) into a variable created on the stack.<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br></code></pre></td>
<td class="source"><pre><code><var>const</var> <var>char</var>* greeting = <kbd>"Hello, handsome!"</kbd>;
<var>char</var> farewell[] = <kbd>"May the road rise to meet you!"</kbd>;</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
In both cases, you now have access to two <i>pointers</i>:<br>
- <b>greeting</b>, which points to the 'H' in the string "Hello, handsome" in the data segment;<br>
- <b>farewell</b>, which points to the 'M' in the string "May the road rise to meet you!" on the stack (notice now that there are <i>two</i> copies of the string "May the road rise to meet you!" in your program -- one in the data segment and one on the stack).<br>
<br>
Hopefully that will help when you think about strings now...<br>
<br>
The reason you don't need to explicitly access <span class="auto"><code class="source">nstring[ nlength - 1 ]</code></span> is that, while correct, it is always going to be zero.<br>
<br>
For example:<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br></code></pre></td>
<td class="source"><pre><code>MyString::MyString(<var>const</var> <var>char</var> *input)
{
  <cite>// Count how many characters we need to store the input string</cite>
  <var>for</var> (nlength = 0; input[ nlength ] != 0; nlength++);
  <cite>// Also count the terminating nul character</cite>
  nlength += 1;
  <cite>// Get space from the heap for the string</cite>
  nstring = <var>new</var> <var>char</var>[ nlength ];
  <cite>// Copy all the characters, including the terminating nul, into our heap space</cite>
  <var>for</var> (<var>int</var> i = 0; i &lt; nlength; i++)
    nstring[ i ] = input[ i ];
}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
If <b>input</b> points to the 'B' in the string "Bob" (which is the same as the array <span class="auto"><code class="source">{ <kbd>'B'</kbd>, <kbd>'o'</kbd>, <kbd>'b'</kbd>, <kbd>'\0'</kbd> }</code></span>, then line 4 will count three non-nul characters. Line 6 will add one to that, so that <b>nlength</b> is four -- the exact number of characters needed to store the string and its nul-terminator. Next we need somewhere to put the copy, so we get a chunk of cells from the heap on line 8. Finally, lines 10 and 11 copy the input array to our chunk of cells on the heap.<br>
<br>
Hmm, one other thing: <span class="auto"><code class="source">nstring[ i ]</code></span> is just a fancy shortcut for <span class="auto"><code class="source">*(nstring + i)</code></span>.<br>
<br>
Hope this helps.
</div>
<div class="dhow">
<span class="dbtn" id="CH_btn76261"></span>

</div>
</div>
</div>
<div class="C_forPost" id="msg76284"><span title="76284,20705,1023,9,0"></span>
<div class="box">
<div class="boxtop">
<div class="dwhen"><a href="http://www.cplusplus.com/forum/beginner/15396/#msg76284" title="Link to this post"><img src="./Making my own String class  - C++ Forum_files/link.png" width="16" height="8"></a> <span id="CH_zTmfa5e1aa0fe" title="Mon, 19 Oct 2009 19:27:25 +0000">Oct 19, 2009 at 11:27pm</span><script type="text/javascript">WhenId('CH_zTmfa5e1aa0fe');</script><noscript>Oct 19, 2009 at 7:27pm UTC</noscript></div>
<div class="dwho"><a href="http://www.cplusplus.com/user/xxhashxx/"><b>xxhashxx</b> (9)</a></div>
</div>
<div class="dwhat" colspan="2" id="CH_i76284">
yeah i managed to fix the overloaded + operator<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>10<br>11<br>12<br>13<br>14<br>15<br>16<br>17<br>18<br>19<br>20<br></code></pre></td>
<td class="source"><pre><code>MyString <var>operator</var> + (<var>const</var> MyString&amp; S1, <var>const</var> MyString &amp; S2)
{
<var>int</var> size = (S1.nlength -1) + (S2.nlength -1) +1;
<var>char</var> * temp = <var>new</var> <var>char</var>[size];
<var>for</var>(<var>int</var> i = 0; i &lt; (S1.nlength -1);i++)
{
temp[i] = S1.nstring[i];
}

<var>int</var> j = 0;
<var>for</var>(<var>short</var> k = S1.nlength - 1 , j=0; k &lt; (size-1) ; k++, j++)
{temp[k] = S2.nstring[j];}

<var>if</var>(temp[size -1 ] != <kbd>'\0'</kbd>){temp[size -1] = <kbd>'\0'</kbd>;}

MyString S3(temp);
<var>delete</var>[] temp;
<var>return</var> S3;
} 
</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
I made use of the copy constructor and passed the temp variable to it, deleted temp first and then returneed the object.<br>
<br>
Secondly my intital calculation of size was wrong;<br>
i had said size = S1.nlength + S2.nlength + 1;<br>
this also includes the space for the terminator '\0'<br>
<br>
the rest were some errors in the for loops which i rectified: so the following<br>
<br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>1<br>2<br>3<br>4<br>5<br>6<br>7<br></code></pre></td>
<td class="source"><pre><code>MyString A, B,C ;
cin &gt;&gt; A;
cin &gt;&gt; B;
C = A + <kbd>" "</kbd> + B;
MyString D(A + <kbd>" "</kbd> + B);
cout &lt;&lt; C &lt;&lt; C.length() &lt;&lt; endl;
cout &lt;&lt; D &lt;&lt; D.length() &lt;&lt; endl;</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
works well, and returns the right size of the string.<br>
<br>
<br>
i left the destructor as <br>
<div class="auto"><table class="snippet"><tbody><tr><td class="rownum"><pre><code>&nbsp;</code></pre></td>
<td class="source"><pre><code><var>virtual</var> ~ MyString(){<var>delete</var>[] nstring;}</code></pre></td><td class="C_btnholder"></td></tr></tbody></table></div>
<br>
<br>
the rest i made some few changes to,<br>
<br>
thanks to Duoas and kbw<br>
<br>
<br>

</div>
<div class="dhow">
<span class="dbtn" id="CH_btn76284"></span>

</div>
</div>
</div>
</div><div class="rootinsMore"></div><div class="rootbtnMore"></div><div class="rootinsNew"></div><div class="rootbtnNew"></div><div id="CH_insNew"></div><div id="CH_reply">Topic archived. No new replies allowed.</div><div id="CH_subscription"></div><div class="rootedtNew"></div><script type="text/javascript">new for_PostList(15396,1,20705,1,'CH_PostList','CH_subscription','CH_reply','CH_insNew','CH_edttl','/forum/thread.cgi','/forum/post.cgi','/forum/myposts.cgi',64,32,512,256,1024,16);</script></div>
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7973859818";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></div>
<div id="I_nav">
<div class="sect root">
<h3><b><a href="http://www.cplusplus.com/">C++</a></b></h3>
<ul>
<li class="folder info"><a href="http://www.cplusplus.com/info/">Information</a></li>
<li class="folder doc"><a href="http://www.cplusplus.com/doc/">Tutorials</a></li>
<li class="folder reference"><a href="http://www.cplusplus.com/reference/">Reference</a></li>
<li class="folder articles"><a href="http://www.cplusplus.com/articles/">Articles</a></li>
<li class="folder selected forum"><a href="http://www.cplusplus.com/forum/">Forum</a></li>
</ul>
</div>
<div class="sect">
<h3><b><a href="http://www.cplusplus.com/forum/">Forum</a></b></h3>
<ul>
<li class="selected"><a href="http://www.cplusplus.com/forum/beginner/"><b>Beginners</b></a></li><li><a href="http://www.cplusplus.com/forum/windows/"><b>Windows Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/unices/"><b>UNIX/Linux Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/general/"><b>General C++ Programming</b></a></li><li><a href="http://www.cplusplus.com/forum/lounge/"><b>Lounge</b></a></li><li><a href="http://www.cplusplus.com/forum/jobs/"><b>Jobs</b></a></li></ul>
</div>
<div id="I_subnav"></div>
<div class="C_ad234">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-7688470879129516";
google_ad_slot = "7445514729";
google_ad_width = 234;
google_ad_height = 60;
//-->
</script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div></div>
<div id="I_midclear"></div>
</div>
</div>
<div id="I_bottom">
<div id="I_footer">
	<a href="http://www.cplusplus.com/">Home page</a> | <a href="http://www.cplusplus.com/privacy.do">Privacy policy</a><br>© cplusplus.com, 2000-2014 - All rights reserved - <i>v3.1</i><br><a href="http://www.cplusplus.com/contact.do?referrer=www.cplusplus.com%2Fforum%2Fbeginner%2F15396%2F">Spotted an error? contact us</a>
</div>
</div>

<script type="text/javascript">
<!--
function NavFor(us) {document.getElementById('I_subnav').innerHTML=us.ok?'<div class="sect"><h3><b><a href="/user/">'+us.user+'</a></b></h3><ul><li><a href="/forum/myposts.cgi">My topics</a></li></ul></div>':'';}onSession(NavFor);ready();
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-521783-1']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//-->
</script>


</body></html>